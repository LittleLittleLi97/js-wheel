{"version":3,"file":"vue.js","sources":["../src/compile/ast.js","../src/compile/render.js","../src/compile/index.js","../src/vdom/index.js","../src/vdom/patch.js","../src/lifecycle.js","../src/observer/array.js","../src/observer/index.js","../src/state.js","../src/init.js","../src/index.js"],"sourcesContent":["// id=\"app\" id='app' id=app\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/;\n// 标签名 <my-header></my-header>\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`;\n// <my:header></my:header>\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`;\n// <div\nconst startTagOpen = new RegExp(`^<${qnameCapture}`);\n// > 或 />\nconst startTagClose = /^\\s*(\\/?)>/;\n// </div>\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`);\n\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;\n\nexport function parseToAst(html) {\n\n    const stack = [];\n    let root;\n    let currentParent = null;\n\n    function start(tagName, attrs) {\n        const node = {\n            tagName,\n            attrs,\n            type: 1,\n            parent: null,\n            children: []\n        };\n        if (!root) {\n            root = node;\n        }\n        if (currentParent) {\n            currentParent.children.push(node);\n        }\n        node.parent = currentParent;\n        currentParent = node;\n\n        stack.push(node);\n    }\n    function end() {\n        stack.pop();\n        currentParent = stack[stack.length - 1];\n    }\n    function chars(text) {\n        text = text.trim();\n        if (!text) return;\n        const node = {\n            type: 3,\n            text,\n            parent: currentParent\n        };\n        currentParent.children.push(node);\n    }\n    function startTag() {\n        const startTagMatch = html.match(startTagOpen);\n\n        if (startTagMatch) {\n            const match = {\n                tagName: startTagMatch[1],\n                attrs: [],\n                children: []\n            };\n            advance(startTagMatch[0].length);\n\n            let end;\n            let attr;\n            while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\n                const key = attr[1];\n                const value = attr[3] || attr[4] || attr[5];\n                match.attrs.push({\n                    name: key,\n                    value\n                });\n                advance(attr[0].length);\n            }\n            if (end) {\n                advance(end[0].length);\n            }\n\n            return match;\n        }\n\n        return false;\n    }\n    function advance(n) {\n        html = html.substring(n);\n    }\n\n    while (html) {\n        const endText = html.indexOf('<');\n        if (endText === 0) {\n            const startTagMatch = startTag();\n\n            if (!startTagMatch) {\n                const endTagMatch = html.match(endTag);\n\n                if (endTagMatch) {\n                    end(endTagMatch);\n                    advance(endTagMatch[0].length);\n                }\n            } else {\n                start(startTagMatch.tagName, startTagMatch.attrs);\n            }\n\n            continue;\n        }\n        if (endText > 0) {\n            const text = html.substring(0, endText);\n            chars(text);\n            advance(endText);\n        }\n    }\n\n    return root;\n}","const defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;\n\nfunction parseAttrs(attrs) {\n    const result = attrs.map((item)=>{\n        const {name, value} = item;\n\n        if (name === 'style') {\n\n            const styleArr = [];\n\n            value.split(';').map((styleItem)=>{\n                const [styleKey, styleValue] = styleItem.split(':');\n                if (styleKey) {\n                    styleArr.push(`\"${styleKey.trim()}\":\"${styleValue.trim()}\"`);\n                }\n            });\n\n            return `style:{${styleArr.join(',')}}`;\n        } else {\n            return `${name}:\"${value}\"`;\n        }\n    });\n    return `{${result.join(',')}}`;\n}\n\nfunction parseChildren(children) {\n    const arr = children.map((item)=>{\n        if (item.type === 1) {\n            return parseAstToRender(item);\n        } else {\n            return parseChars(item.text);\n        }\n    });\n\n    return arr.join(',');\n}\n\nfunction parseChars(text) {\n    const result = [];\n    let lastIndex = 0;\n    let match;\n\n    while (match = defaultTagRE.exec(text)) {\n        const before = text.substring(lastIndex, match.index);\n        if (before) result.push(`\"${before}\"`);\n        result.push(`_s(${match[1].trim()})`);\n\n        lastIndex = defaultTagRE.lastIndex;\n    }\n\n    const last = text.substring(lastIndex);\n    if (last) result.push(`\"${last}\"`);\n\n    return `_v(${result.join('+')})`;\n}\n\nexport function parseAstToRender(ast) {\n    const children = ast.children;\n    return `_c('${ast.tagName}',${parseAttrs(ast.attrs)}${\n        children.length > 0 ? `,${parseChildren(children)}` : ''})`;\n}","import { parseToAst } from \"./ast\";\nimport { parseAstToRender } from \"./render\";\n\nexport function parseTemplateToRender(template) {\n    const ast = parseToAst(template);\n    const render = parseAstToRender(ast);\n    return new Function(`with(this){return ${render}}`);\n}","export function createElementVNode(vm, tag, data, ...children) {\n    const key = data.key;\n    if (key) delete data.key;\n    return createVNode(vm, tag, key, data, children, undefined);\n}\n\nexport function createTextVNode(vm, text) {\n    return createVNode(vm, undefined, undefined,undefined,undefined, text);\n}\n\nexport function createVNode(vm, tag, key, data, children, text) {\n    return {\n        vm,\n        tag,\n        key,\n        data,\n        children,\n        text\n    }\n}","function createElement(vnode) {\n    const {tag, data, children, text} = vnode;\n\n    \n    if (tag) { // element\n        const dom = document.createElement(tag);\n        for (let key in data) {\n    \n            if (key === 'style') {\n    \n                const styleObj = data[key];\n                for (let styleKey in styleObj) {\n                    dom.style[styleKey] = styleObj[styleKey];\n                }\n            } else {\n                dom.setAttribute(key, data[key]);\n            }\n        }\n    \n        if (children) {\n            children.forEach((child)=>{\n                dom.appendChild(createElement(child));\n            });\n        }\n\n        return dom;\n    } else { // text\n        return document.createTextNode(text);\n    }\n}\n\nexport function patch(oldNode, vnode) {\n    if (oldNode.nodeType) {\n        const dom = createElement(vnode);\n        const parentDom = oldNode.parentNode;\n\n        parentDom.insertBefore(dom, oldNode.nextSibling);\n        parentDom.removeChild(oldNode);\n\n        return dom;\n    }\n}","import { createElementVNode, createTextVNode } from \"./vdom\";\nimport { patch } from \"./vdom/patch\";\n\nexport function initLifeCycle(Vue) {\n    Vue.prototype._c = function(tagName, attrs, ...children) {\n        return createElementVNode(this, tagName, attrs, ...children);\n    }\n    Vue.prototype._v = function(text) {\n        return createTextVNode(this, text);\n    }\n    Vue.prototype._s = function(value) {\n        return value;\n    }\n    Vue.prototype._render = function() {\n        return this.$options.render.call(this);\n    }\n    Vue.prototype._update = function(vnode) {\n        const vm = this;\n        const el = vm.$el;\n\n        vm.$el = patch(el, vnode);\n    }\n}\n\nexport function mountComponent(vm, el) {\n    vm.$el = el;\n    vm._update(vm._render(), el);\n}","import { observe } from \".\";\n\nconst oldArrayPrototype = Array.prototype;\n\nconst arrMethods = [\n    'pop',\n    'push',\n    'shift',\n    'unshift',\n    'reverse',\n    'splice',\n    'sort'\n];\n\nexport const newArrayPrototype = Object.create(oldArrayPrototype);\n\narrMethods.forEach((method)=>{\n    newArrayPrototype[method] = function(...args) {\n\n        const result = Array.prototype[method].call(this, ...args);\n\n        let newValue;\n        switch(method) {\n            case 'push':\n            case 'unshift':\n                newValue = args;\n                break;\n            case 'splice':\n                newValue = args.slice(2);\n                break;\n            default:\n                break;\n        }\n\n        if (newValue) {\n            observe(newValue);\n        }\n\n        return result;\n    }\n})","import { newArrayPrototype } from \"./array\";\n\nclass Observer {\n    constructor(data) {\n        if (Array.isArray(data)) {\n            data.__proto__ = newArrayPrototype;\n            this.walkArray(data);\n        } else {\n            this.walk(data);\n        }\n    }\n    walk(data) {\n        for (let key in data) {\n            defineReactive(data, key, data[key]);\n        }\n    }\n    walkArray(data) {\n        for (let i = 0; i < data.length; i++) {\n            observe(data[i]);\n        }\n    }\n}\n\nexport function observe(data) {\n    if (typeof data !== 'object' || data === null) {\n        return;\n    }\n    return new Observer(data);\n}\n\nfunction defineReactive(data, key, value) {\n    observe(value);\n    Object.defineProperty(data, key, {\n        get() {\n            return value;\n        },\n        set(newValue) {\n            if (newValue !== value) {\n                value = newValue;\n                observe(newValue);\n            }\n        }\n    })\n}","import { observe } from \"./observer\";\n\nexport function initState(vm) {\n    const options = vm.$options;\n\n    initData(vm);\n\n    for (let key in vm._data) {\n        proxyData(vm, '_data', key);\n    }\n}\n\nfunction initData(vm) {\n    let data = vm.$options.data;\n    if (data) {\n        data = typeof data === 'function' ? data() : data || {};\n    }\n    vm._data = data;\n    observe(vm._data);\n}\n\nfunction proxyData(target, inter, key) {\n    let value = target[inter][key];\n    Object.defineProperty(target, key, {\n        get() {\n            return target[inter][key];;\n        },\n        set(newValue) {\n            if (newValue !== value) {\n                value = newValue;\n                observe(newValue);\n            }\n        }\n    });\n}","import { parseTemplateToRender } from \"./compile\";\nimport { mountComponent } from \"./lifecycle\";\nimport { initState } from \"./state\";\n\nexport function initMixin(Vue) {\n    Vue.prototype._init = function(options) {\n        const vm = this;\n        vm.$options = options;\n\n        initState(vm);\n\n        if (options.el) {\n            vm.$mount(options.el);\n        }\n    }\n    Vue.prototype.$mount = function(el) {\n        const vm = this;\n        const options = vm.$options;\n\n        el = document.querySelector(el);\n\n        if (!options.render) {\n            let template = options.template;\n            if (!template) {\n                template = el.outerHTML;\n            }\n            options.render = parseTemplateToRender(template);\n        }\n\n        mountComponent(vm, el);\n    }\n}","import { initMixin } from \"./init\";\nimport { initLifeCycle } from \"./lifecycle\";\n\nexport default function Vue(options) {\n    this._init(options);\n}\n\ninitMixin(Vue);\ninitLifeCycle(Vue);"],"names":["attribute","ncname","qnameCapture","startTagOpen","RegExp","startTagClose","endTag","parseToAst","html","stack","root","currentParent","start","tagName","attrs","node","type","parent","children","push","end","pop","length","chars","text","trim","startTag","startTagMatch","match","advance","attr","key","value","name","n","substring","endText","indexOf","endTagMatch","defaultTagRE","parseAttrs","result","map","item","styleArr","split","styleItem","styleKey","styleValue","join","parseChildren","arr","parseAstToRender","parseChars","lastIndex","exec","before","index","last","ast","parseTemplateToRender","template","render","Function","createElementVNode","vm","tag","data","createVNode","undefined","createTextVNode","createElement","vnode","dom","document","styleObj","style","setAttribute","forEach","child","appendChild","createTextNode","patch","oldNode","nodeType","parentDom","parentNode","insertBefore","nextSibling","removeChild","initLifeCycle","Vue","prototype","_c","_v","_s","_render","$options","call","_update","el","$el","mountComponent","oldArrayPrototype","Array","arrMethods","newArrayPrototype","Object","create","method","args","newValue","slice","observe","Observer","isArray","__proto__","walkArray","walk","defineReactive","i","defineProperty","get","set","initState","initData","_data","proxyData","target","inter","initMixin","_init","options","$mount","querySelector","outerHTML"],"mappings":"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"}